{"ast":null,"code":"import _objectSpread from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useHistory,useLocation}from\"react-router-dom\";import{addDays,addWeeks}from\"date-fns\";import TextField from\"@material-ui/core/TextField\";import DateRangePicker from\"@material-ui/lab/DateRangePicker\";import AdapterDateFns from\"@material-ui/lab/AdapterDateFns\";import LocalizationProvider from\"@material-ui/lab/LocalizationProvider\";import Box from\"@material-ui/core/Box\";import{getAllAvailable,postBookingDetails}from\"../../actions/booking\";import\"../../styles/BookWidget.scss\";/* Have to redo redux, store local form here and ONLY update onSubmission... */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookWidget=function BookWidget(){var dispatch=useDispatch();var history=useHistory();var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showInfo=_useState2[0],setShowInfo=_useState2[1];var _useState3=useState({dates:[new Date(),addDays(new Date(),7)],adults:1,children:0}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var toggleMobileDisplay=function toggleMobileDisplay(){setShowInfo(!showInfo);};function getWeeksAfter(date,amount){return date?addWeeks(date,amount):undefined;}var updateAdultQuantity=function updateAdultQuantity(val){if(formData.adults===1&&val===-1)return;if(formData.adults===5&&val===1)return;setFormData(_objectSpread(_objectSpread({},formData),{},{adults:formData.adults+val}));};var updateChildrenQuantity=function updateChildrenQuantity(val){if(formData.children===0&&val===-1)return;if(formData.children===5&&val===1)return;setFormData(_objectSpread(_objectSpread({},formData),{},{children:formData.children+val}));};var handleSubmit=function handleSubmit(e){e.preventDefault();var adults=formData.adults,children=formData.children,dates=formData.dates;if(location.pathname!==\"/booking\"){history.push(\"/booking\");}dispatch(getAllAvailable({adults:adults,children:children,dates:dates}));// have to include this information, or retrieve it from the state, to the create booking request\ndispatch(postBookingDetails({adults:adults,children:children,dates:dates}));};return/*#__PURE__*/_jsx(\"div\",{className:\"BookWidget \".concat(showInfo?\"active\":\"\"),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DateRangePicker,{disablePast:true,maxDate:getWeeksAfter(formData.dates[0],4),startText:\"Check-in\",endText:\"Check-out\",value:formData.dates,onChange:function onChange(newValue){if(!newValue.includes(null)){setFormData(_objectSpread(_objectSpread({},formData),{},{dates:newValue}));}},renderInput:function renderInput(startProps,endProps){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(TextField,_objectSpread({},startProps)),/*#__PURE__*/_jsx(Box,{sx:{mx:2},children:\" to \"}),/*#__PURE__*/_jsx(TextField,_objectSpread({},endProps))]});}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"guest\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adults\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Adults\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"guest-select\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-sm contrast\",name:\"adults\",onClick:function onClick(){return updateAdultQuantity(1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"})}),/*#__PURE__*/_jsx(\"span\",{children:formData.adults}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-sm contrast\",name:\"adults\",onClick:function onClick(){updateAdultQuantity(-1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"children\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Children\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"guest-select\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-sm contrast\",name:\"children\",onClick:function onClick(){updateChildrenQuantity(1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"})}),/*#__PURE__*/_jsx(\"span\",{children:formData.children}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-sm contrast\",name:\"children\",onClick:function onClick(){updateChildrenQuantity(-1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus\"})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Check Availability\"}),/*#__PURE__*/_jsx(\"i\",{className:\"mobile-toggle fas fa-chevron-\".concat(showInfo?\"up\":\"down\"),onClick:toggleMobileDisplay})]})});};export default BookWidget;","map":{"version":3,"names":["React","useState","useDispatch","useHistory","useLocation","addDays","addWeeks","TextField","DateRangePicker","AdapterDateFns","LocalizationProvider","Box","getAllAvailable","postBookingDetails","BookWidget","dispatch","history","location","showInfo","setShowInfo","dates","Date","adults","children","formData","setFormData","toggleMobileDisplay","getWeeksAfter","date","amount","undefined","updateAdultQuantity","val","updateChildrenQuantity","handleSubmit","e","preventDefault","pathname","push","newValue","includes","startProps","endProps","mx"],"sources":["C:/Users/adoud/Desktop/hotel_mern/client/src/components/booking/BookWidget.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { addDays, addWeeks } from \"date-fns\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport DateRangePicker from \"@material-ui/lab/DateRangePicker\";\r\nimport AdapterDateFns from \"@material-ui/lab/AdapterDateFns\";\r\nimport LocalizationProvider from \"@material-ui/lab/LocalizationProvider\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { getAllAvailable, postBookingDetails } from \"../../actions/booking\";\r\nimport \"../../styles/BookWidget.scss\";\r\n\r\n/* Have to redo redux, store local form here and ONLY update onSubmission... */\r\n\r\nconst BookWidget = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [showInfo, setShowInfo] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    dates: [new Date(), addDays(new Date(), 7)],\r\n    adults: 1,\r\n    children: 0,\r\n  });\r\n  const toggleMobileDisplay = () => {\r\n    setShowInfo(!showInfo);\r\n  };\r\n\r\n  function getWeeksAfter(date, amount) {\r\n    return date ? addWeeks(date, amount) : undefined;\r\n  }\r\n\r\n  const updateAdultQuantity = (val) => {\r\n    if (formData.adults === 1 && val === -1) return;\r\n    if (formData.adults === 5 && val === 1) return;\r\n    setFormData({ ...formData, adults: formData.adults + val });\r\n  };\r\n  const updateChildrenQuantity = (val) => {\r\n    if (formData.children === 0 && val === -1) return;\r\n    if (formData.children === 5 && val === 1) return;\r\n    setFormData({ ...formData, children: formData.children + val });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { adults, children, dates } = formData;\r\n    if (location.pathname !== \"/booking\") {\r\n      history.push(\"/booking\");\r\n    }\r\n    dispatch(getAllAvailable({ adults, children, dates }));\r\n    // have to include this information, or retrieve it from the state, to the create booking request\r\n    dispatch(postBookingDetails({ adults, children, dates }));\r\n  };\r\n  return (\r\n    <div className={`BookWidget ${showInfo ? \"active\" : \"\"}`}>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"date\">\r\n          <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n            <DateRangePicker\r\n              disablePast\r\n              maxDate={getWeeksAfter(formData.dates[0], 4)}\r\n              startText=\"Check-in\"\r\n              endText=\"Check-out\"\r\n              value={formData.dates}\r\n              onChange={(newValue) => {\r\n                if (!newValue.includes(null)) {\r\n                  setFormData({\r\n                    ...formData,\r\n                    dates: newValue,\r\n                  });\r\n                }\r\n              }}\r\n              renderInput={(startProps, endProps) => (\r\n                <React.Fragment>\r\n                  <TextField {...startProps} />\r\n                  <Box sx={{ mx: 2 }}> to </Box>\r\n                  <TextField {...endProps} />\r\n                </React.Fragment>\r\n              )}\r\n            />\r\n          </LocalizationProvider>\r\n        </div>\r\n        <div className=\"guest\">\r\n          <div className=\"adults\">\r\n            <label>Adults</label>\r\n            <div className=\"guest-select\">\r\n              <div\r\n                className=\"btn-sm contrast\"\r\n                name=\"adults\"\r\n                onClick={() => updateAdultQuantity(1)}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </div>\r\n              <span>{formData.adults}</span>\r\n              <div\r\n                className=\"btn-sm contrast\"\r\n                name=\"adults\"\r\n                onClick={() => {\r\n                  updateAdultQuantity(-1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-minus\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"children\">\r\n            <label>Children</label>\r\n            <div className=\"guest-select\">\r\n              <div\r\n                className=\"btn-sm contrast\"\r\n                name=\"children\"\r\n                onClick={() => {\r\n                  updateChildrenQuantity(1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </div>\r\n              <span>{formData.children}</span>\r\n              <div\r\n                className=\"btn-sm contrast\"\r\n                name=\"children\"\r\n                onClick={() => {\r\n                  updateChildrenQuantity(-1);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-minus\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button className=\"btn\">Check Availability</button>\r\n        <i\r\n          className={`mobile-toggle fas fa-chevron-${showInfo ? \"up\" : \"down\"}`}\r\n          onClick={toggleMobileDisplay}\r\n        ></i>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookWidget;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}