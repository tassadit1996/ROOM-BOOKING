{"ast":null,"code":"import React from'react';import{useSelector,useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import'../../styles/Available.scss';import{postRoomDetails}from'../../actions/booking';import{displayIcon}from'../helper/Icons';// styling for the material ui progress circle\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Available=function Available(){// when storing and managind date in the database, make sure to first convert it to US format!!\nvar dispatch=useDispatch();var history=useHistory();var details=useSelector(function(state){return state.details.booking;});var availableBookings=useSelector(function(state){return state.bookingsAPI;});var handleSubmit=function handleSubmit(room){// For the purpsoses of booking info, we only want to have the title and price per night\nvar title=room.title,price=room.price;var rawDates=details.dates[1].getTime()-details.dates[0].getTime();var totalNights=Math.round(rawDates/(1000*3600*24));var totalPrice=totalNights*price;dispatch(postRoomDetails({title:title,price:price,totalNights:totalNights,totalPrice:totalPrice}));// we want to save our room to localStorage at this point\nhistory.push('/booking/checkout');};var rawDates=details.dates[1].getTime()-details.dates[0].getTime();var totalNights=Math.round(rawDates/(1000*3600*24));return/*#__PURE__*/_jsx(\"div\",{className:\"Available\",children:availableBookings.map(function(room){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-img\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/rooms/\".concat(room.mainImage),alt:room.mainImage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"alt-font\",children:room.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"location\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-map-marker-alt\"}),\" Room Booking, Phuket\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Size:\"}),/*#__PURE__*/_jsx(\"p\",{children:room.size})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Occupancy:\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\".concat(room.adults,\" Adults & \").concat(room.children,\" Children\")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bedding:\"}),/*#__PURE__*/_jsx(\"p\",{children:room.bedding})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"amenities\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amenities:\"}),/*#__PURE__*/_jsx(\"ul\",{children:room.amenities.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(displayIcon(item))})},item);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-price\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Daily Price\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"$\".concat(room.price)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Total (\",totalNights,\" Nights)\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"$\".concat(room.price*totalNights)})]}),room.hasError?/*#__PURE__*/_jsx(\"button\",{className:\"btn contrast\",style:{color:'white',backgroundColor:'black'},children:\"Unavailable\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn contrast\",onClick:function onClick(){return handleSubmit(room);},children:\"Book\"})]})]}),room.hasError&&/*#__PURE__*/_jsxs(\"span\",{className:\"error-msg\",children:[\"This room has been booked from\",' ',new Date(room.hasError.dates[0]).toLocaleString('en-US',{year:'numeric',month:'2-digit',day:'2-digit'}),' ',\"to\",' ',new Date(room.hasError.dates[1]).toLocaleString('en-US',{year:'numeric',month:'2-digit',day:'2-digit'})]})]},room.url);})});};export default Available;","map":{"version":3,"names":["React","useSelector","useDispatch","useHistory","postRoomDetails","displayIcon","Available","dispatch","history","details","state","booking","availableBookings","bookingsAPI","handleSubmit","room","title","price","rawDates","dates","getTime","totalNights","Math","round","totalPrice","push","map","mainImage","size","adults","children","bedding","amenities","item","hasError","color","backgroundColor","Date","toLocaleString","year","month","day","url"],"sources":["C:/Users/adoud/Desktop/hotel_mern/client/src/components/booking/Available.js"],"sourcesContent":["import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport '../../styles/Available.scss'\r\nimport { postRoomDetails } from '../../actions/booking'\r\nimport { displayIcon } from '../helper/Icons'\r\n// styling for the material ui progress circle\r\n\r\nconst Available = () => {\r\n  // when storing and managind date in the database, make sure to first convert it to US format!!\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const details = useSelector((state) => state.details.booking)\r\n  const availableBookings = useSelector((state) => state.bookingsAPI)\r\n\r\n  const handleSubmit = (room) => {\r\n    // For the purpsoses of booking info, we only want to have the title and price per night\r\n    const { title, price } = room\r\n    const rawDates = details.dates[1].getTime() - details.dates[0].getTime()\r\n    const totalNights = Math.round(rawDates / (1000 * 3600 * 24))\r\n    const totalPrice = totalNights * price\r\n\r\n    dispatch(postRoomDetails({ title, price, totalNights, totalPrice }))\r\n    // we want to save our room to localStorage at this point\r\n    history.push('/booking/checkout')\r\n  }\r\n  const rawDates = details.dates[1].getTime() - details.dates[0].getTime()\r\n  const totalNights = Math.round(rawDates / (1000 * 3600 * 24))\r\n  return (\r\n    <div className=\"Available\">\r\n      {availableBookings.map((room) => (\r\n        <React.Fragment key={room.url}>\r\n          <div className=\"room-card\">\r\n            <div className=\"card-img\">\r\n              <img src={`img/rooms/${room.mainImage}`} alt={room.mainImage} />\r\n            </div>\r\n            <div className=\"card-info\">\r\n              <h2 className=\"alt-font\">{room.title}</h2>\r\n              <span className=\"location\">\r\n                <i className=\"fas fa-map-marker-alt\"></i> Room Booking, Phuket\r\n              </span>\r\n              <div className=\"details\">\r\n                <div>\r\n                  <label>Size:</label>\r\n                  <p>{room.size}</p>\r\n                </div>\r\n                <div>\r\n                  <label>Occupancy:</label>\r\n                  <p>{`${room.adults} Adults & ${room.children} Children`}</p>\r\n                </div>\r\n                <div>\r\n                  <label>Bedding:</label>\r\n                  <p>{room.bedding}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"amenities\">\r\n                <label>Amenities:</label>\r\n                <ul>\r\n                  {room.amenities.map((item) => (\r\n                    <li key={item}>\r\n                      <i className={`${displayIcon(item)}`}></i>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"card-price\">\r\n              <div>\r\n                <label>Daily Price</label>\r\n                <h4>{`$${room.price}`}</h4>\r\n              </div>\r\n              <div>\r\n                <label>Total ({totalNights} Nights)</label>\r\n                <h4>{`$${room.price * totalNights}`}</h4>\r\n              </div>\r\n              {room.hasError ? (\r\n                <button\r\n                  className=\"btn contrast\"\r\n                  style={{ color: 'white', backgroundColor: 'black' }}\r\n                >\r\n                  Unavailable\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"btn contrast\"\r\n                  onClick={() => handleSubmit(room)}\r\n                >\r\n                  Book\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n          {room.hasError && (\r\n            <span className=\"error-msg\">\r\n              This room has been booked from{' '}\r\n              {new Date(room.hasError.dates[0]).toLocaleString('en-US', {\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n              })}{' '}\r\n              to{' '}\r\n              {new Date(room.hasError.dates[1]).toLocaleString('en-US', {\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n              })}\r\n            </span>\r\n          )}\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Available\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}