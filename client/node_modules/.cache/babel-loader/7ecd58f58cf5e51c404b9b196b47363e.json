{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/adoud/Desktop/hotel_mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import*as api from\"../../api/index\";import Bookings from\"./bookings/Bookings\";import\"./Auth.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Auth=function Auth(){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];// profile is being access from local storage, shich was set in the reducer file auth.js\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$api$signin,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();if(error.length>0){setError(\"\");}if(!(formData.username.length<1||formData.password.length<1)){_context.next=5;break;}return _context.abrupt(\"return\",setError(\"Please fill Out All Fields\"));case 5:_context.next=7;return api.signin(formData);case 7:_yield$api$signin=_context.sent;data=_yield$api$signin.data;if(data){localStorage.setItem(\"profile\",JSON.stringify({data:data}));setUser(JSON.parse(localStorage.getItem(\"profile\")));}// dispatch(signin(formData));\nsetFormData({username:\"\",password:\"\"});_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);if(!_context.t0){_context.next=17;break;}return _context.abrupt(\"return\",setError(\"Invalid Username/Password\"));case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var logout=function logout(){localStorage.clear();setUser(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"Auth\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header-main\",style:{background:' no-repeat center/cover url(\"/img/admin/admin_main.jpg\")'},children:/*#__PURE__*/_jsx(\"div\",{className:\"header-content\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"alt-font\",children:\"Admin Page\"})})}),!user?/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"alt-font\",children:\"Admin Login\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:error.length>0&&error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",name:\"username\",onChange:handleChange,autoComplete:\"off\",value:formData.username}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:formData.password,placeholder:\"Password\",name:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Login\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Bookings,{}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:logout,children:\"Log Out\"})})]})]});};export default Auth;","map":{"version":3,"names":["React","useState","api","Bookings","Auth","username","password","formData","setFormData","JSON","parse","localStorage","getItem","user","setUser","error","setError","handleChange","e","target","name","value","handleSubmit","preventDefault","length","signin","data","setItem","stringify","logout","clear","background","color"],"sources":["C:/Users/adoud/Desktop/hotel_mern/client/src/components/auth/Auth.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport * as api from \"../../api/index\";\r\nimport Bookings from \"./bookings/Bookings\";\r\n\r\nimport \"./Auth.scss\";\r\n\r\nconst Auth = () => {\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\"))); // profile is being access from local storage, shich was set in the reducer file auth.js\r\n\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n  const handleSubmit = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      if (error.length > 0) {\r\n        setError(\"\");\r\n      }\r\n      if (formData.username.length < 1 || formData.password.length < 1) {\r\n        return setError(\"Please fill Out All Fields\");\r\n      }\r\n      const { data } = await api.signin(formData);\r\n\r\n      if (data) {\r\n        localStorage.setItem(\"profile\", JSON.stringify({ data }));\r\n        setUser(JSON.parse(localStorage.getItem(\"profile\")));\r\n      }\r\n      // dispatch(signin(formData));\r\n      setFormData({\r\n        username: \"\",\r\n        password: \"\",\r\n      });\r\n    } catch (error) {\r\n      if (error) {\r\n        return setError(\"Invalid Username/Password\");\r\n      }\r\n    }\r\n  };\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Auth\">\r\n      <header\r\n        className=\"header-main\"\r\n        style={{\r\n          background:\r\n            ' no-repeat center/cover url(\"/img/admin/admin_main.jpg\")',\r\n        }}\r\n      >\r\n        <div className=\"header-content\">\r\n          <h2 className=\"alt-font\">Admin Page</h2>\r\n        </div>\r\n      </header>\r\n      {!user ? (\r\n        <div className=\"login\">\r\n          <h1 className=\"alt-font\">Admin Login</h1>\r\n          <span style={{ color: \"red\" }}>{error.length > 0 && error}</span>\r\n          <form onSubmit={handleSubmit}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              name=\"username\"\r\n              onChange={handleChange}\r\n              autoComplete=\"off\"\r\n              value={formData.username}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              value={formData.password}\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={handleChange}\r\n            />\r\n            <button className=\"btn\">Login</button>\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <Bookings />\r\n          <div className=\"btn-container\">\r\n            <button className=\"btn\" onClick={logout}>\r\n              Log Out\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}